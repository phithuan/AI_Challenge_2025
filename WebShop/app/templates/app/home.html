{% extends 'app/base.html' %}
{% load static %}
{% block banner_slider %}
<link rel="stylesheet" href="{% static 'app/css/style.css' %}">
<!-- ‚úÖ Carousel Bootstrap -->
<div id="carouselExampleDark" class="carousel slide carousel-fade" data-bs-ride="carousel">

  <!-- üîπ N√∫t ƒëi·ªÅu h∆∞·ªõng nh·ªè b√™n d∆∞·ªõi -->
  <div class="carousel-indicators">
    <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
    <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="1" aria-label="Slide 2"></button>
  </div>

  <!-- üîπ N·ªôi dung c·ªßa t·ª´ng slide -->
  <div class="carousel-inner">
    <!-- Slide 1 -->
    <div class="carousel-item active" data-bs-interval="6000">
      <img src="{% static 'app/image/banner/Gemini_Generated_2.png' %}" 
          class="d-block w-100 img-fluid" 
          alt="Th·ªùi ƒë·∫°i h·∫£i t·∫∑c m·ªõi" 
          style="height: 955px; object-fit: cover;">
      <!-- üîπ Caption cƒÉn gi·ªØa, m√†u ƒëen -->
      <div class="carousel-caption d-none d-md-block text-animate text-dark" 
          style="top: 30%; transform: translateY(-30%);">
        <h1 class="fw-bold display-2">Kh√¥ng gian t√¢Ã£p trung</h1>
        <p class="fs-3">Tr√≠ tu·ªá nh√¢n t·∫°o - Tr·ª£ l√Ω c√° nh√¢n c·ªßa b·∫°n</p>
      </div>
    </div>

    <!-- Slide 2 -->
    <div class="carousel-item" data-bs-interval="6000">
      <img src="{% static 'app/image/banner/Gemini_Generated.png' %}" 
          class="d-block w-100 img-fluid" 
          alt="Th·ªùi ƒë·∫°i m·ªõi" 
          style="height: 955px; object-fit: cover;">
      <!-- üîπ Caption ƒë·∫∑t tr√™n cao b√™n tr√°i -->
      <div class="carousel-caption d-none d-md-block text-start text-animate"
          style="position: absolute; top: 1%; left: 20%; right: auto; max-width: 600px; text-align: left;">
        <h1 class="fw-bold display-3" style="color: #fff; text-shadow: 2px 2px 8px rgba(0,0,0,0.7); white-space: nowrap;"> 
          Th·∫ø gi·ªõi trong t·∫ßm tay
        </h1>
        <p class="fs-4" style="color: #ffffff; text-shadow: 1px 1px 6px rgba(0,0,0,0.6);">
          Kh√°m ph√° kh√¥ng gian l√†m vi·ªác hi·ªán ƒë·∫°i, nƒÉng ƒë·ªông, 
          n∆°i c√¥ng ngh·ªá v√† s·ª± s√°ng t·∫°o h√≤a quy·ªán c√πng t·∫ßm nh√¨n ƒë√¥ th·ªã ƒë·∫ßy c·∫£m h·ª©ng. 
          B·∫Øt ƒë·∫ßu h√†nh tr√¨nh c·ªßa b·∫°n ngay t·∫°i ƒë√¢y!
        </p>
      </div>
    </div>
  </div>

  <!-- üîπ N√∫t qua l·∫°i -->
  <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleDark" data-bs-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Previous</span>
  </button>

  <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleDark" data-bs-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Next</span>
  </button>
</div>

{% endblock banner_slider %}

{% block main-content %}
<!-- ‚úÖ Ph·∫ßn n·ªôi dung ch√≠nh -->
<div class="container-fluid my-5 px-5"> <!-- ƒê·ªïi container my-5 -> container-fluid + padding -->
  <div class="row text-center">
    {% for item in product %}
    <!-- üîπ Card s·∫£n ph·∫©m -->
    <div class="col-md-4 col-lg-3 mb-5"> <!--ƒë√¥Ãâi col-md-4 mb-5 sangggg col-lg-3: hi·ªÉn th·ªã 4 c·ªôt tr√™n m√†n h√¨nh l·ªõn -->
      <div class="card shadow-lg border-0 h-100">
        
        <!-- üîπ Khi hover v√†o ·∫£nh s·∫Ω ph√≥ng to -->
        <a href="{% url 'product_detail' item.id %}" class="img-hover">
          <img src="{{ item.ImageURL }}" class="card-img-top product-img" alt="{{ item.name }}">
        </a>


        <div class="card-body d-flex flex-column">
          <h5 class="card-title fw-bold">{{item.name}}</h5>
          <p class="card-text">{{ item.description|default:"(Ch∆∞a c√≥ m√¥ t·∫£)" }}</p>

          <!-- üîπ N√∫t mua h√†ng + gi√° -->
          <div class="d-flex justify-content-between align-items-center mt-auto">
            <a  data-product="{{ item.id }}" data-action="add" 
                href="#" class="btn btn-success update-cart">Th√™m vaÃÄo gioÃâ haÃÄng
            </a> 
            <h4 class="text-secondary m-0 fw-semibold"><strong>$ {{item.price | floatformat:0}}</strong></h4>
          </div>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
</div>

<!-- Bong b√≥ng chatbot -->
<div id="chatbot-bubble" onclick="toggleChat()">üí¨
  <div id="chatbot-tooltip">
    ü§ñ T√¥i l√† <b>ChatRAG</b><br>
    b·∫°n c·∫ßn h·ªèi g√¨ kh√¥ng?
  </div>
</div>

<!-- Khung chat -->
<div id="chatbot-box">
  <div id="chatbot-header">
    ü§ñ Chatbot AI
    <button onclick="toggleChat()">‚úñ</button>
  </div>
  <div id="chatbot-messages"></div>
  <div id="chatbot-input">
    <textarea id="chatbot-text" placeholder="Nh·∫≠p c√¢u h·ªèi..."></textarea>
    <button onclick="sendMessage()">‚û§</button>
  </div>
</div>

<script>
const tooltip = document.getElementById("chatbot-tooltip");

// Tooltip nh·∫•p nh√°y m·ªói 2 gi√¢y
function showTooltip() {
  tooltip.classList.remove("tooltip-show");
  void tooltip.offsetWidth;
  tooltip.classList.add("tooltip-show");
}
setInterval(showTooltip, 3000);

// Toggle chatbot (logic c≈© ‚Äì ch·∫Øc ch·∫Øn ho·∫°t ƒë·ªông)
function toggleChat() {
  const box = document.getElementById("chatbot-box");
  box.style.display = box.style.display === "flex" ? "none" : "flex";
  tooltip.style.display = "none";
}
</script>


<!-- ‚úÖ Import CSS + JS -->
<link rel="stylesheet" href="{% static 'app/css/chatbot.css' %}">
<script src="{% static 'app/js/chatbot.js' %}"></script>


<!-- ‚úÖ CSS cho ·∫£nh s·∫£n ph·∫©m -->
<style>
  /* Hi·ªáu ·ª©ng hover */
  .img-hover img {
    transition: transform 0.4s ease;
  }
  .img-hover img:hover {
    transform: scale(1.08);
  }

  /* C·ªë ƒë·ªãnh k√≠ch th∆∞·ªõc ·∫£nh ƒë·ªÉ ƒë·ªìng ƒë·ªÅu */
  .product-img {
    height: 250px;       /* ch·ªânh cao th·∫•p t√πy √Ω, v√≠ d·ª• 250px */
    object-fit: cover;   /* gi·ªØ t·ªâ l·ªá, c·∫Øt ph·∫ßn d∆∞ */
    width: 100%;
    border-top-left-radius: 0.5rem;
    border-top-right-radius: 0.5rem;
  }
</style>
{% endblock main-content %}



