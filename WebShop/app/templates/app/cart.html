{% extends 'app/base.html' %}
{% load static %}

{% block cart_content %}
<div class="container-fluid my-5 px-5">  <!-- ƒê·ªïi container ‚Üí container-fluid -->
  <h2 class="fw-bold text-success mb-4">üõí Gi·ªè h√†ng c·ªßa b·∫°n</h2>

  <!-- N·∫øu c√≥ s·∫£n ph·∫©m -->
  <div class="card shadow border-0 w-100auto">
    <div class="card-body">
      <div class="d-flex justify-content-between align-items-center mb-3 flex-wrap">
        <a href="{% url 'home' %}" class="btn btn-outline-secondary mb-2">
          ‚Üê Ti·∫øp t·ª•c mua s·∫Øm
        </a>
        <a href="{% url 'checkout' %}" class="btn btn-success mb-2">
          Thanh to√°n
        </a>
      </div>

      <!-- B·∫£ng s·∫£n ph·∫©m -->
      <div class="table-responsive">
        <table class="table table-striped align-middle text-center">
          <thead class="table-success">
            <tr>
              <th scope="col" class="text-start ps-4">S·∫£n ph·∫©m</th>
              <th scope="col">Gi√°</th>
              <th scope="col">S·ªë l∆∞·ª£ng</th>
              <th scope="col">Th√†nh ti·ªÅn</th>
              <th scope="col">Thao t√°c</th>
            </tr>
          </thead>
          <tbody>
            {% for item in items %}
            <!-- V√≠ d·ª• 1 item -->
            <tr>
              <td class="text-start ps-4">
                <div class="d-flex align-items-center">
                  <img src="{{ item.product.ImageURL }}" 
                       class="rounded me-3 shadow-sm" 
                       style="width:60px; height:60px; object-fit:cover;" 
                       alt="Product">
                  <span class="fw-semibold">{{ item.product.name }}</span>
                </div>
              </td>
              <td class="text-danger fw-bold">{{ item.product.price |floatformat:0 }}</td>
              <td>
                <div class="d-flex justify-content-center align-items-center">
                  <button data-product="{{ item.product.id }}" data-action="remove" class="btn btn-sm btn-outline-secondary update-cart">-</button> <!-- N√∫t gi·∫£m s·ªë l∆∞·ª£ng -->
                  <span class="mx-2">{{ item.quantity }}</span> <!-- Hi·ªÉn th·ªã s·ªë l∆∞·ª£ng -->
                  <button data-product="{{ item.product.id }}" data-action="add" class="btn btn-sm btn-outline-secondary update-cart">+</button> <!-- N√∫t tƒÉng s·ªë l∆∞·ª£ng -->
                </div>
              </td>
              <td class="fw-bold">${{ item.get_price_quantity|floatformat:0 }}</td>
              <td>
                <button data-product="{{ item.product.id }}" data-action="delete" class="btn btn-sm btn-danger update-cart">X√≥a</button>
              </td>
            </tr>
            <!-- K·∫øt th√∫c v√≠ d·ª• -->
            {% endfor %}
          </tbody>
        </table>
      </div>

      <!-- T·ªïng ti·ªÅn -->
      <div class="d-flex justify-content-end mt-4 pe-4">
        <h4 class="fw-bold">T·ªïng c·ªông: 
          <span class="text-danger">${{ order.get_cart_total|floatformat:0 }}</span>
        </h4>
      </div>
    </div>
  </div>
</div>
{% endblock cart_content %}
